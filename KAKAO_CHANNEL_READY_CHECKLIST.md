# 카카오 비즈니스 채널 승인 후 연동 체크리스트

## 📱 채널 승인 후 즉시 진행할 작업들

### 1단계: 기본 설정 (승인 즉시)
- [ ] 카카오 비즈니스 관리자센터 접속
- [ ] 채널 기본 정보 확인
- [ ] 프로필 사진 및 소개글 설정
- [ ] 채널 URL 확인 및 기록

### 2단계: 챗봇 API 활성화
- [ ] 관리자센터 → '챗봇' 메뉴 접속
- [ ] 'API형 챗봇' 선택
- [ ] 개발자 도구 활성화
- [ ] API 키 및 Secret 키 발급받기

### 3단계: Webhook 설정
- [ ] Webhook URL 등록: `https://yourdomain.com/api/kakao/webhook`
- [ ] HTTP Method: POST 설정
- [ ] Content-Type: application/json 설정
- [ ] 서명 검증 활성화

### 4단계: 환경변수 설정
```bash
# .env.local에 추가
KAKAO_BOT_SECRET=여기에_발급받은_시크릿키_입력
```

### 5단계: 테스트 시나리오
1. **기본 인사**
   ```
   사용자: "안녕"
   예상 응답: 인사 메시지 + 메뉴 버튼들
   ```

2. **약속 제안**
   ```
   사용자: "김철수와 내일 오후 3시 강남역에서 만나기"
   예상 응답: 약속 제안 처리 완료 메시지
   ```

3. **비가입자 일정 조회**
   ```
   사용자: "오늘 일정 보기"
   예상 응답: 서비스 연결 안내 + 연결 버튼
   ```

## 🔧 현재 준비된 기능들

### 자연어 처리 패턴
- ✅ 인사말 인식: "안녕", "hello"
- ✅ 일정 조회: "오늘 일정", "내 일정"
- ✅ 약속 제안: "[이름]와 [시간] [장소]에서 만나기"
- ✅ 친구 약속: "친구와 약속"
- ✅ 도움말: "도움", "help"

### 응답 형식
- ✅ 텍스트 메시지
- ✅ 버튼 키보드 (최대 5개)
- ✅ 웹 링크 버튼
- ✅ 이미지 첨부 지원

### 사용자 관리
- ✅ 신규 사용자 자동 등록
- ✅ 기존 사용자 정보 조회
- ✅ 비가입자 게스트 처리
- ✅ 서비스 연결 유도

## 📊 실시간 모니터링 준비

### 로그 확인 방법
```bash
# 서버 로그에서 카카오톡 봇 활동 확인
tail -f logs/kakao-bot.log

# 또는 개발 서버에서
npm run dev
# 콘솔에서 [Kakao Bot] 메시지 확인
```

### 성공/실패 지표
- ✅ Webhook 요청 수신 여부
- ✅ 서명 검증 성공 여부
- ✅ 메시지 파싱 성공 여부
- ✅ 응답 전송 성공 여부

## 🚀 고급 기능 활성화 계획

### Phase 1: 기본 챗봇 (승인 즉시)
- [x] 자연어 명령 처리
- [x] 버튼 메뉴 제공
- [x] 약속 제안 파싱
- [x] 서비스 연결 안내

### Phase 2: 실시간 알림 (1주일 후)
- [ ] WebSocket 연동
- [ ] 일정 변경 알림
- [ ] 친구 요청 알림
- [ ] 약속 응답 알림

### Phase 3: AI 기능 강화 (2주일 후)
- [ ] 자연어 일정 생성
- [ ] 장소 추천 기능
- [ ] 일정 충돌 감지
- [ ] 스마트 시간 제안

## 🔍 트러블슈팅 가이드

### 자주 발생하는 문제들

1. **Webhook 응답 없음**
   ```
   체크포인트:
   - HTTPS 인증서 유효성
   - 카카오 서버 IP 접근 허용
   - 응답 시간 3초 이내
   ```

2. **서명 검증 실패**
   ```bash
   # 디버깅 방법
   console.log('Received signature:', signature);
   console.log('Calculated signature:', calculatedSignature);
   ```

3. **한글 인코딩 문제**
   ```javascript
   // 이미 처리됨 - UTF-8 인코딩 확인
   const body = await request.text(); // 자동 UTF-8 처리
   ```

### 긴급 연락처
- 카카오 비즈니스 고객센터: 1644-5498
- 개발자 지원: https://devtalk.kakao.com/

## 📈 성공 지표 모니터링

### KPI 추적
- 일일 활성 사용자 (DAU)
- 메시지 응답 성공률
- 서비스 연결 전환율
- 사용자 만족도 (피드백)

### 데이터 수집
```sql
-- 카카오 봇 사용 통계
SELECT
  DATE(created_at) as date,
  COUNT(*) as message_count,
  COUNT(DISTINCT platform_user_id) as unique_users
FROM messenger_integrations
WHERE platform = 'kakao'
GROUP BY DATE(created_at);
```

## 🎯 다음 목표

1. **즉시 목표**: 카카오 챗봇 정상 작동 확인
2. **1주일 목표**: Discord 봇 연동 완료
3. **1개월 목표**: 실시간 약속 조율 기능 완성
4. **3개월 목표**: 사용자 100명 돌파

---

**✅ 현재 상태**: 모든 코드 준비 완료, API 키만 설정하면 즉시 작동!