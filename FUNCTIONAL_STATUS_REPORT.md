# Geulpi Calendar 기능 상태 보고서

## 테스트 일시: 2025-09-15

## 요약
많은 기능들이 UI는 완성되어 있지만 백엔드 통합이 제대로 작동하지 않는 상태입니다.

## 1. 인증 시스템 (Authentication)

### ❌ 이메일/비밀번호 로그인
- **상태**: 작동 안 함
- **오류**: 500 Internal Server Error - "Invalid email or password"
- **문제**: 데이터베이스 연결 또는 인증 로직 문제로 추정

### ❌ 이메일/비밀번호 회원가입  
- **상태**: 작동 안 함
- **오류**: 500 Internal Server Error - "Email already exists" (신규 이메일에도 발생)
- **문제**: 데이터베이스 연결 문제 또는 중복 체크 로직 오류

### ✅ Google OAuth 로그인
- **상태**: 부분적으로 작동
- **설명**: Google 로그인 페이지로 리다이렉트는 되지만 콜백 처리 확인 필요

### ⚠️ Apple/Microsoft 로그인
- **상태**: UI만 존재
- **설명**: 버튼이 비활성화 상태

## 2. 대시보드 (Dashboard)

### ⚠️ 접근 제어
- **상태**: 인증 없이 접근 가능
- **문제**: 로그인하지 않아도 /dashboard 페이지 접근 가능 (보안 문제)

## 3. 주요 기능별 상태

### 📅 캘린더 기능
- **상태**: API 보호됨
- **/api/calendar/events**: 인증 필요 (정상)
- **테스트 필요**: 로그인 후 CRUD 작업

### 💬 AI 채팅 기능
- **상태**: 부분적 작동
- **/api/chat/sessions**: ⚠️ 인증 없이 접근 가능 (보안 문제)
- **/api/ai/suggestions**: 응답 없음
- **테스트 필요**: Gemini API 통합, 대화 저장/불러오기

### 📷 이미지 업로드 및 OCR
- **상태**: 미확인
- **테스트 필요**: 파일 업로드, OCR 처리

### 👥 친구 관리
- **상태**: API 보호됨
- **/api/friends**: 인증 필요 (정상)
- **테스트 필요**: 로그인 후 친구 추가/삭제

### 🔍 검색 기능
- **상태**: API 보호됨
- **/api/search**: 인증 필요 (정상)
- **테스트 필요**: 로그인 후 검색 기능

### 🔔 알림 시스템
- **상태**: 미확인
- **테스트 필요**: 실시간 알림, 이메일 알림

### 💳 결제/구독
- **상태**: API 응답 없음
- **/api/payments/billing-key**: 빈 응답
- **테스트 필요**: Toss Payments 통합

### 🗺️ 지도 기능
- **상태**: API 없음
- **/api/maps/search**: 404 에러
- **문제**: API 라우트가 구현되지 않음

### 📅 이벤트 API
- **상태**: API 없음
- **/api/events**: 404 에러
- **문제**: API 라우트가 구현되지 않음

### 👤 프로필 관리
- **상태**: API 보호됨
- **/api/profile**: 인증 필요 (정상)
- **/api/user/profile**: 미확인

## 4. 데이터베이스 연결 상태

### Supabase 설정
- `.env.local`에 Supabase 설정이 있음
- 실제 연결 상태는 확인 필요

### Prisma 설정  
- `prisma.schema`에 User, Event, SearchLog 모델 정의됨
- `DATABASE_URL`이 로컬 Prisma Postgres를 가리킴
- 실제 Supabase와의 연결 불일치 가능성

## 5. 주요 문제점

1. **데이터베이스 연결 문제**
   - Prisma는 로컬 DB를 사용하도록 설정
   - Supabase 클라이언트는 원격 DB 사용
   - 두 설정 간 불일치

2. **인증 시스템 고장**
   - 기본적인 회원가입/로그인 기능 작동 안 함
   - 세션 관리 미확인

3. **보안 취약점**
   - 인증 없이 대시보드 접근 가능
   - API 엔드포인트 보호 확인 필요

4. **에러 처리**
   - 500 에러만 반환, 구체적인 에러 메시지 부족
   - 프론트엔드 에러 처리 개선 필요

## 6. 권장 사항

### 즉시 수정 필요
1. 데이터베이스 연결 설정 통일 (Prisma ↔ Supabase)
2. 기본 인증 기능 복구
3. 대시보드 접근 제어 구현

### 추가 테스트 필요
1. API 엔드포인트 전체 테스트
2. 각 기능별 통합 테스트
3. 에러 시나리오 테스트

### 개선 사항
1. 로깅 시스템 구현
2. 에러 메시지 상세화
3. 개발/프로덕션 환경 분리